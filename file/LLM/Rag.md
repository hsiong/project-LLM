https://zhuanlan.zhihu.com/p/675509396

### RAG 的核心概念

RAG 通过将两个步骤结合起来工作：

1. **检索（Retrieval）：**
   在这个步骤中，模型会从一个预先构建的文档库、知识库或者数据库中检索与输入相关的最相关文档或信息。这可以是向量数据库（例如通过BERT、DPR等生成的向量索引）中的相似文本片段，或者其他经过索引的结构化信息。
2. **生成（Generation）：**
   生成部分是一个基于生成的语言模型（如GPT或BART），它会基于检索到的相关信息生成最终的答案。生成的过程通常结合了从检索到的信息以及输入的上下文，以产生更加准确和知识丰富的回答。

### RAG 的工作流程

1. 用户输入一个问题或查询。
2. 系统首先从知识库或文档库中检索相关的文档或片段。这通常使用的是一种基于向量表示的检索算法，比如使用密集检索模型（DPR，Dense Passage Retrieval）来找到与查询最相关的文档。
3. 之后，检索到的信息与原始查询一起作为输入，传递给生成式模型（如GPT或BART），模型利用这些信息生成答案。
4. 最终输出是基于检索信息和生成模型的结合体。

### 为什么使用 RAG？

RAG 的主要优点在于：

- **知识增强：** 生成模型（如GPT）虽然经过大规模预训练，但仍然可能对细粒度领域的知识缺乏掌握，尤其是当需要最新、复杂或准确性很高的信息时。通过检索真实的文档或知识库，可以弥补生成模型的不足。
- **处理知识局限性：** 生成模型往往依赖于其训练数据，而这种数据通常有一个“知识截止点”，即无法掌握训练后出现的新信息。通过引入检索，模型能够基于外部信息库进行实时回答。
- **准确性提升：** 与纯生成式模型相比，RAG 模型能够更加准确地生成包含事实信息的回答，因为它可以依赖检索到的具体事实。

### RAG 的应用场景

- **问答系统（QA Systems）：** 比如在技术支持、医疗问答等场景中，RAG 可以通过检索特定领域的文档库（如技术手册或医学指南）提供准确的回答。
- **对话系统：** 在复杂的对话场景中，RAG 可以从文档中检索相关信息，帮助对话系统生成更符合用户需求的回复。
- **搜索引擎优化：** 将生成式模型与搜索引擎结合，可以在生成回答之前先检索相关的网页或文档，使得输出更加相关和准确。

### 总结

RAG 模型将检索与生成结合，提供了一种在有限数据和知识下提升模型准确性和知识覆盖的有效方法。它不仅依赖模型的生成能力，还借助外部的知识库来增强回答的质量和可靠性，在需要高准确性和最新信息的领域中表现尤为突出。